## video 双向音视频延迟测试


### 测试说明

*  测试环境：
      *  设备端环境：OnePlus 3T  系统 Android 7.1.1
      *  观看端环境：iPhone Xs Max 系统 iOS 15.3.1
      *  网络环境：Tencent-WiFi 不限速 
          

*  延时影响因素：
      *  双向音视频延时影响因素较多，需要通过主要因素 
           *  发送端手机硬件性能与采集、编码相关
           *  网络带宽与码流发送接收相关
           *  接收端手机硬件性能与解码、播放相关


*  以下测试环境信息：
      *  app 观看端 ：
           *  使用版本号：video-v2.4.22
           *  视频： Video: h264 (Constrained Baseline), yuv420p(progressive), 640x480, 25 fps, 25 tbr, 1200k tbn, 50 tbc, 640 * 480 * 3 * 4 bps
           *  音频： Audio: aac (LC), 8000 Hz, mono, fltp, 128 kb/s
      *  设备端 ：
           *  使用版本号：master+git.029d816
           *  视频： Video: h264 (High), yuv420p(tv, smpte170m/bt470bg/smpte170m, progressive), 640x360, 25 fps, 1k tbr, 1k tbn, 250000 bps
           *  音频： Audio: aac (LC), 44100 Hz, stereo, fltp, 131 kb/s
           


## 首开延迟测试

**双向音视频：在局域网 iOS App 播放 Android 设备场景下首开数据如下：**
[基准时钟](http://www.daojishiqi.com/bjtime.asp)

| 耗时单位（ms）           | case1 | case2 | case3 | case4 | case5 | case6 | case7 | case8 | case9 | case10 | 耗时平均值  |
|--------------------|-------|-------|-------|-------|-------|-------|-------|-------|-------|--------|--------|
| App播放器触发打洞到第一帧渲染出图 | 770   | 619   | 603   | 630   | 683   | 634   | 620   | 662   | 631   | 651    | 650.3  |



**双向音视频：在局域网 Android 设备播放 iOS APP 设备场景下首开数据如下：**

| 耗时单位（ms）        | case1 | case2 | case3 | case4 | case5 | case6 | case7 | case8 | case9 | case10 | 耗时平均值  |
|-----------------|-------|-------|-------|-------|-------|-------|-------|-------|-------|--------|--------|
| 设备播放器拉流到第一帧收到   | 831   | 611   | 794   | 644   | 696   | 590   | 664   | 427   | 728   | 517    | 650.2  |
| 设备播放器拉流到第一帧渲染出图 | 2463  | 2070  | 1913  | 2265  | 1886  | 2272  | 2081  | 1756  | 2412  | 2704   | 2182.2 |



## 网络延迟测试

**双向音视频：场景使用APP端拍摄基准时钟 ------ buflen=256**

| 耗时单位（ms） | case1        | case2        | case3        | case4        | case5        | case6        | case7        | case8        | case9        | case10       | 耗时平均值  |
|----------|--------------|--------------|--------------|--------------|--------------|--------------|--------------|--------------|--------------|--------------|--------|
| 基准时钟     | 13:26:11:451 | 13:26:12:335 | 13:26:13:052 | 13:26:16:769 | 13:26:19:518 | 13:26:21:052 | 13:26:22:449 | 13:26:31:508 | 13:26:55:383 | 13:27:52:017 |        |
| 设备收到时钟   | 13:26:08:951 | 13:26:10:061 | 13:26:11:089 | 13:26:15:351 | 13:26:18:351 | 13:26:20:031 | 13:26:20:961 | 13:26:28:581 | 13:26:52:331 | 13:27:49:733 |        |
| 网络延时     | 2500         | 2274         | 1963         | 1418         | 1167         | 1021         | 1488         | 2927         | 3052         | 2284         | 2009.4 |


**双向音视频：场景使用APP端拍摄基准时钟 ------ buflen=128**

| 耗时单位（ms） | case1        | case2        | case3        | case4        | case5        | case6        | case7        | case8        | case9        | case10       | 耗时平均值  |
|----------|--------------|--------------|--------------|--------------|--------------|--------------|--------------|--------------|--------------|--------------|--------|
| 基准时钟     | 15:07:10:089 | 15:07:34:138 | 15:07:36:237 | 15:07:38:201 | 15:07:40:482 | 15:07:43:020 | 15:07:45:153 | 15:07:48:582 | 15:07:50:934 | 15:07:53:768 |        |
| 设备收到时钟   | 15:07:09:153 | 15:07:33:383 | 15:07:35:733 | 15:07:37:853 | 15:07:39:903 | 15:07:42:237 | 15:07:44:557 | 15:07:48:130 | 15:07:50:252 | 15:07:53:280 |        |
| 网络延时     | 936          | 755          | 504          | 348          | 579          | 783          | 596          | 452          | 682          | 488          | 612.3  |


**场景使用Android设备端拍摄基准时钟**

| 耗时单位（ms） | case1        | case2        | case3        | case4        | case5        | case6        | case7        | case8        | case9        | case10       | 耗时平均值  |
|----------|--------------|--------------|--------------|--------------|--------------|--------------|--------------|--------------|--------------|--------------|--------|
| 基准时钟     | 17:44:19:632 | 17:44:23:001 | 17:44:27:333 | 17:54:29:902 | 17:54:33:333 | 17:54:36:100 | 17:54:38:532 | 17:54:42:730 | 18:04:00:932 | 18:04:08:633 |        |
| APP收到时钟  | 17:44:18:822 | 17:44:22:180 | 17:44:26:403 | 17:54:29:033 | 17:54:32:406 | 17:54:35:269 | 17:54:37:662 | 17:54:41:887 | 18:04:00:066 | 18:04:07:767 |        |
| 网络延时     | 810          | 821          | 930          | 869          | 927          | 831          | 870          | 843          | 866          | 866          | 863.3  |


    